var FullScreenQuad = require('fullscreen-quad');
var Program = require('pex-glu-program-promise');
var glslify = require('glslify-promise');

function GradientBackground(color1, color2, aspectRatio, scale) {
  this._color1 = color1;
  this._color2 = color2;
  this._aspectRatio = aspectRatio || 1;
  this._scale = scale || 1;
  this._fsQuad = new FullScreenQuad();
  this._program = new Program(glslify(__dirname + '/GradientBackground.glsl'));
}

GradientBackground.prototype.draw = function() {
  this._program.use();
  if (this._program.uniforms.aspectRatio) {
    this._program.uniforms.aspectRatio(this._aspectRatio);
    this._program.uniforms.scale(this._scale);
    this._program.uniforms.color1(this._color1);
    this._program.uniforms.color2(this._color2);
  }
  this._fsQuad.draw(this._program);
}

module.exports = GradientBackground;
