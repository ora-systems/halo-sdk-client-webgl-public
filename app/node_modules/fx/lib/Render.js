var FXStage = require('./FXStage');
var glu = require('pex-glu');

FXStage.prototype.render = function (options) {
  var gl = this.gl;
  var outputSize = this.getOutputSize(options.width, options.height);
  var rt = this.getRenderTarget(outputSize.width, outputSize.height, options.depth, options.bpp);
  glu.pushViewport();
  glu.viewport(0, 0, outputSize.width, outputSize.height);
  rt.bindAndClear();
  if (options.drawFunc) {
    options.drawFunc();
  }
  rt.unbind();
  glu.popViewport();
  return this.asFXStage(rt, 'render');
};
